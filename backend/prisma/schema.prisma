generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id        Int        @id @default(autoincrement())
  name      String
  email     String     @unique
  cpf       String?    @unique
  phone     String?
  address   String?
  city      String?
  state     String?
  role      String
  password  String     @default("123456")
  Delivery  Delivery[]
  medicines Medicine[] @relation("UserMedicines")
}

model Medicine {
  id           Int        @id @default(autoincrement())
  name         String
  active       String
  dosage       String?
  manufacturer String?
  batch        String?
  expiration   String?
  stock        Int
  notes        String?
  createdBy    Int
  createdAt    DateTime   @default(now())
  Delivery     Delivery[]
  user         User       @relation("UserMedicines", fields: [createdBy], references: [id])
}

model Delivery {
  id           Int      @id @default(autoincrement())
  userId       Int
  medicationId Int
  quantity     Int
  date         DateTime
  time         String
  address      String
  notes        String?
  medication   Medicine @relation(fields: [medicationId], references: [id])
  user         User     @relation(fields: [userId], references: [id])
}
